<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>共享单车数据可视化分析系统</title>
    <!-- Bootstrap Styles-->
    <link th:href="@{/css/bootstrap.css}" rel="stylesheet" />
    <!-- FontAwesome Styles-->
    <link th:href="@{/css/font-awesome.css}" rel="stylesheet" />
    <!-- Custom Styles-->
    <link th:href="@{/css/custom-styles.css}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/font-awesome-animation.css}" />

    <!-- Google Fonts-->
    <link href='#css?family=Open+Sans' rel='stylesheet' type='text/css' />
    <link th:href="@{/js/dataTables/dataTables.bootstrap.css}" rel="stylesheet" />
    <style type="text/css">
        #page-inner{
            min-height: 640px
        }
        #page-wrapper{
            min-height: 600px
        }
        .dataTables_filter{
            position: relative;
            float: left;
            margin-left:-130px;
        }


    </style>
</head>
<body>

<div id="wrapper">
    <nav class="navbar navbar-default top-navbar" role="navigation">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".sidebar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html"><i class="fa fa-gear"></i> <strong style="font-size: 15px">共享单车数据可视化分析系统</strong></a>
        </div>


    </nav>
    <!--/. NAV TOP  -->
    <nav class="navbar-default navbar-side" role="navigation">
        <div id="sideNav" href=""><i class="fa fa-caret-right"></i></div>
        <div class="sidebar-collapse">
            <ul class="nav" >
                <li>
                    <a href="#"><i class="fa fa-sitemap"></i> 单车分析<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="index2.html">单车概况</a>
                        </li>
                        <li>
                            <a href="bike_detail2.html">单车详情</a>
                        </li>
                        <li>
                            <a href="bike_dist2.html">单车分布与高峰期分析</a>
                        </li>
                        <li>
                            <a href="analyseB2.html">单车数据分析</a>
                        </li>
                    </ul>
                </li>

                <li>
                    <a href="#"><i class="fa fa-sitemap"></i> 用户分析<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="newold2.html">用户概况</a>
                        </li>
                        <li>
                            <a href="personas2.html">用户画像</a>
                        </li>
                        <li>
                            <a href="analyseU2.html">用户数据分析</a>
                        </li>
                    </ul>
                </li>

                <li>
                    <a href="#"><i class="fa fa-sitemap"></i> 订单分析<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="order22.html">订单详情</a>
                        </li>

                    </ul>
                </li>

                <li>
                    <a href="#"><i class="fa fa-sitemap"></i> 反馈与预警<span class="fa arrow"></span></a>
                    <ul class="nav nav-second-level">
                        <li>
                            <a href="response2.html">用户反馈</a>
                        </li>
                        <li>
                            <a href="warn2.html">警示信息</a>
                        </li>

                    </ul>
                </li>
            </ul>

        </div>

    </nav>
</div>
<!-- /. NAV SIDE  -->

<div id="page-wrapper" >
    <div class="row">
        <div  style="float: right;margin-top:0">
            <button type="button" class="btn-sm btn"  id="button1"  onclick="change()" style="border-radius: 50px;outline: none;width:60px;height: 32px;border: none;background-color:#D3D3D3;"><span style="color: black">武汉</span></button>
            <button type="button" class="btn-sm btn"  id="button2"  onclick="change2()" style="border-radius: 50px;outline: none;width:60px;height: 32px;border: none;background-color:#24c2ce;"><span style="color: black"><span style="color: black">北京</span></span></button>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h1 class="page-header">
                Bike Details <small>Bike data</small>
            </h1>
        </div>
    </div>

    <div id="page-inner" style="background: #ffffff">
        <div class="col-md-3" style="height: 600px">
            <!-- Advanced Tables -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    Bike Details
                </div>
                <div class="panel-body">
                    <div class="table-responsive" >
                        <table class="table table-striped table-bordered table-hover" id="dataTables-example">
                            <thead>
                            <tr>
                                <td>ID&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp </td>
                                <td>详细情况</td>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="bike:${bikeList}">
                                <td th:text="${bike.getBikeID()}"></td>
                                <td  onclick="psy_method(this)" style="cursor: pointer;color:#31bcef;text-decoration: none">查看详情</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>
            <!--End Advanced Tables -->


        </div>


        <div class="col-md-3" style="height: 240px;margin-left: 3%">
            <div style="width: 120%;margin-top:10px;height: 50%;padding-left:0;background:#9DE2E7" class="small-box bg-aqua">
                <div class="inner">
                    <div class="progress progress-striped active" style="width:190px;height:35px;margin-top:15px;margin-bottom: 26px">
                        <div th:id="4" class="progress-bar progress-bar-primary" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 40%">
                            <span class="sr-only">40% Complete (success)</span>
                        </div>
                    </div>
                    <strong style="color: #ffffff;font-size: 20px">
                        单车磨损程度
                    </strong>
                </div>
                <div class="icon">
                    <i class="fa fa-search"></i>
                </div>
            </div>

            <div style="width: 120%;height: 50%;margin-top:10%;background:#6BD2DB" class="small-box bg-aqua">

                <div class="inner">
                                    <span th:id="2" style="color: #ffffff">
                                        地点: 三里屯
                                    </span>
                    <br/>
                    <div style="margin-top:10px;margin-bottom: 10px">
                                        <span th:id="3" style="color: #ffffff">
                                            坐标: [116.455484,39.937189]
                                        </span>
                    </div>
                    <strong style="color: #ffffff;font-size: 20px;line-height: 60px">
                        单车位置信息
                    </strong>
                </div>
                <div class="icon" >
                    <i class="fa fa-globe"></i>
                </div>
            </div>

        </div>

        <div class="col-md-4" style="width:400px;height: 270px;margin-left: 8%;margin-top:0px" id="p1">
        </div>

        <div class="col-md-3" style="height: 240px;margin-left: 3%;margin-top:30px">
            <div style="width: 120%;height: 50%;padding-left:0;background:#9DE2E7" class="small-box bg-aqua">
                <div class="inner">
                    <h3 th:id="1" style="color: #ffffff;margin-bottom: 25px;margin-top: 8px">
                        Unused
                    </h3>
                    <strong style="color: #ffffff;font-size: 20px" >
                        单车使用状态
                    </strong>
                </div>
                <div class="icon">
                    <i class="fa fa-search"></i>
                </div>
            </div>

            <div style="width: 120%;height: 54%;margin-top:10%;background:#6BD2DB" class="small-box bg-aqua">

                <div class="inner">
                                    <span th:id="5" style="color: #ffffff">
                                        累计使用次数:&nbsp&nbsp&nbsp425
                                    </span>
                    <br/>
                    <div style="margin-top:6px">
                                        <span th:id="6" style="color: #ffffff">
                                            累计行驶里程:&nbsp&nbsp&nbsp673 km
                                        </span>
                    </div>
                    <div style="margin-top:6px">
                                        <span th:id="7" style="color: #ffffff">
                                            累计收益:&nbsp&nbsp&nbsp¥632.50
                                        </span>
                    </div>
                    <strong style="color: #ffffff;font-size: 20px;line-height: 60px">
                        单车累计使用情况
                    </strong>
                </div>
                <div class="icon" >
                    <i class="fa fa-globe"></i>
                </div>
            </div>

        </div>

        <div class="col-md-4" style="width:400px;height: 300px;margin-left: 8%;margin-top:20px" id="p2">
        </div>



    </div>



</div>
</div>
<script th:src="@{/js/jquery-1.10.2.js}"></script>
<!-- Bootstrap Js -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Metis Menu Js -->
<script th:src="@{/js/jquery.metisMenu.js}"></script>
<!-- DATA TABLE SCRIPTS -->
<script th:src="@{/js/dataTables/jquery.dataTables.js}"></script>
<script th:src="@{/js/dataTables/dataTables.bootstrap.js}"></script>
<script>
    $(function(){
        $('#dataTables-example').dataTable({


            "bFilter":true,

            "bLengthChange": false,  //每页显示的记录数

            'iDisplayLength': 10, //每页初始显示5条记录

            "bSort": true,  //禁止排序

            "paging": true,   //禁止分页

            "info": false   //去掉底部文字


        });
    });
</script>
<!-- Custom Js -->
<script th:src="@{/js/custom-scripts.js}"></script>
<script th:src="@{/js/echarts.js}"></script>

<script type="text/javascript">
    var option = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        title:{
            text:'过去一周使用次数',
            left:'center'
        },
        dataset: {
            source: [
                ['amount', 'product'],
                [ 5, 'Mon'],
                [ 6, 'Tue'],
                [ 12, 'Wed'],
                [ 18, 'Thur'],
                [ 7, 'Fri'],
                [ 19, 'Sat'],
                [ 23, 'Sun']
            ]
        },

        xAxis: {name: 'amount',
            splitLine:{
                show:false
            }
        },
        yAxis: {type: 'category'},
        grid:{
            top:"50px",
            left:"50px",
            right:"15px",
            bottom:"50px",
            width:"auto", //图例宽度
            height:"70%"//图例高度
        },


        series: [
            {
                color:'#9DE2E7',
                name:'使用次数',
                type: 'bar',
                encode: {
                    // Map the "amount" column to X axis.
                    x: 'amount',
                    // Map the "product" column to Y axis
                    y: 'product'
                }
            }
        ]
    };



    var myChart = echarts.init(document.getElementById('p1'));
    myChart.setOption(option);
</script>

<script type="text/javascript">
    var option2 = {
        tooltip: {
            trigger: 'axis',
            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                type: 'line'        // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        title:{
            text:' 过去一周收益情况',
            left:'center'
        },
        xAxis: {
            type: 'category',
            data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
        },
        yAxis: {
            type: 'value',
            splitLine:{
                show:false
            }
        },
        grid:{
            top:"50px",
            left:"50px",
            right:"15px",
            bottom:"50px",
            width:"auto", //图例宽度
            height:"70%"//图例高度
        },
        series: [{
            color:'#6BD2DB',
            name:'当日收益',
            data: [7.5,3.5,8,15.5,6,16.5,19],
            type: 'line'
        }]
    };

    var myChart2 = echarts.init(document.getElementById('p2'));
    myChart2.setOption(option2);

</script>

<script type="text/javascript">
    // var json = {"isUsing":"Using",
    // "location":"武汉大学",
    // "coordinate":"114.360257,30.528439",
    // "attritionRate":"40"};
    function psy_method(e)
    {
        var ei=parseInt(e.previousElementSibling.innerHTML);
        // alert(ei);
        $.ajax({
            url: "/bike_detail/click2",
            data: { info:ei},
            //type、contentType必填,指明传参方式
            type: "post",
            dataType:"json",
            success: function(response){
                // alert("11111")
                if(response != null){
                    // var a = JSON.parse(response) //必要的
                    // print(a);
                    // alert(response.isUsing.toString());
                    $("#1").html(response.isUsing);
                    if(response.location==""){
                        $("#2").html("单车正在使用中")
                        $("#3").html("暂时无法查询位置信息")
                    }
                    else {
                        $("#2").html(response.location)
                        $("#3").html(response.coordinate)
                    }
                    $("#4").css("width",response.attritionRate)
                    $("#5").html("累计使用次数:&nbsp&nbsp&nbsp"+response.numUse)
                    $("#6").html("累计行驶里程:&nbsp&nbsp&nbsp"+response.runDist)
                    $("#7").html("累计收益:&nbsp&nbsp&nbsp"+response.income)
                }
            }
        });
        r = []
        for(var i=0;i<7;i++){
            r[i] = (Math.random()*(20-3) + 3).toFixed(2);
        }
        myChart2 = echarts.init(document.getElementById('p2'));
        option2.series = [{
            data: r,
            type: 'line'
        }]
        myChart2.setOption(option2);

        r2 = []
        for(var i=0;i<7;i++){
            r2[i] = Math.floor(Math.random()*5);
            r2[i] = Math.ceil(r[i]+r2[i]);
        }
        myChart = echarts.init(document.getElementById('p1'));
        option.dataset.source = [
            ['amount', 'product'],
            [ r2[0], 'Mon'],
            [ r2[1], 'Tue'],
            [ r2[2], 'Wed'],
            [ r2[3], 'Thur'],
            [ r2[4], 'Fri'],
            [ r2[5], 'Sat'],
            [ r2[6], 'Sun']
        ]
        myChart.setOption(option);
    }
</script>

<script type="text/javascript">
    window.onload=function(){
        document.getElementById("button2").style.background="#24c2ce";
    }
</script>

<script type="text/javascript">
    function change() {

        document.getElementById("button1").style.background="#24c2ce";
        document.getElementById("button2").style.background="#D3D3D3";
        window.location.href="bike_detail.html";
    }

    function change2() {
        document.getElementById("button1").style.background="#D3D3D3";
        document.getElementById("button2").style.background="#24c2ce";
    }
</script>


</body>
</html>




